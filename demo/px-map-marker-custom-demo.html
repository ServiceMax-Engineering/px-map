<!--
Copyright (c) 2018, General Electric

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<!-- Common imports -->
<link rel="import" href="../../polymer/polymer.html" />

<!-- Common demo imports -->
<link rel="import" href="../../px-demo/px-demo-header.html" />
<link rel="import" href="../../px-demo/px-demo-api-viewer.html" />
<link rel="import" href="../../px-demo/px-demo-footer.html" />
<link rel="import" href="../../px-demo/px-demo-configs.html" />
<link rel="import" href="../../px-demo/px-demo-props.html" />
<link rel="import" href="../../px-demo/px-demo-interactive.html" />
<link rel="import" href="../../px-demo/px-demo-component-snippet.html" />


<!-- Imports for this component -->
<link rel="import" href="../px-map.html" />
<link rel="import" href="../px-map-tile-layer.html" />
<link rel="import" href="../px-map-layer-geojson.html" />

<!-- Custom  -->
<link rel="import" href="../px-map-marker-custom.html" />

<!-- Demo DOM module -->
<dom-module id="px-map-marker-custom-demo">
  <template>

    <!-- Header -->
    <px-demo-header module-name="px-map-marker-custom-demo" parent-name="px-map" description="The custom icon loads the map with custom icons created."
      mobile tablet desktop>
    </px-demo-header>

    <!-- Interactive -->
    <px-demo-interactive>
      <!-- Configs -->
      <px-demo-configs slot="px-demo-configs" configs="[[configs]]" props="{{props}}" chosen-config="{{chosenConfig}}"></px-demo-configs>

      <!-- Props -->
      <px-demo-props slot="px-demo-props" props="{{props}}" config="[[chosenConfig]]"></px-demo-props>


      <!-- Component ---------------------------------------------------------->
      <px-demo-component slot="px-demo-component">
        <div style="height:400px;width:600px;display:flex">
          <px-map flex-to-size>
            <px-map-tile-layer url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"></px-map-tile-layer>

            <!-- Use the custom icon marker -->
            <px-map-marker-custom lat="37.7022" lng="-121.9358" icon="px-nav:unconfirmed" stroke-color="blue" fill-color="white" icon-content="px-nav:home"
              icon-fill-color="red" icon-stroke-color="black">
            </px-map-marker-custom>

            <!-- Use the custom icon marker -->
            <px-map-marker-custom lat="37.779927" lng="-121.978015" icon="px-nav:unconfirmed" stroke-color="blue" fill-color="white"
              icon-content="10">
            </px-map-marker-custom>
            <px-map-marker-static lat="37.779927" lng="-121.978015"></px-map-marker-static>

            <!-- Use the custom icon marker -->
            <px-map-marker-custom lat="37.752709" lng="-121.959926" icon="px-nav:unconfirmed" stroke-color="blue" fill-color="white"
              icon-content="12">
            </px-map-marker-custom>


            <px-map-layer-geojson data='{
              "type": "FeatureCollection",
              "features": [
                {
                  "type": "Feature",
                  "id": "cdf6ba8e-5b16-470b-a423-30a5930e4129",
                  "properties": {
                    "Drive Time": "42 minutes",
                    "Mileage": "25.05 miles"
                  },
                  "geometry": {
                    "type": "LineString",
                    "coordinates": [
                      [
                        -122.385787,
                        37.617906
                      ],
                      [
                        -122.385787,
                        37.617906
                      ],
                      [
                        -122.397028,
                        37.614992
                      ],
                      [
                        -122.405793,
                        37.64115
                      ],
                      [
                        -122.406318,
                        37.656503
                      ],
                      [
                        -122.391924,
                        37.670583
                      ],
                      [
                        -122.38826,
                        37.678275
                      ],
                      [
                        -122.395635,
                        37.711616
                      ],
                      [
                        -122.407937,
                        37.738197
                      ],
                      [
                        -122.402811,
                        37.752551
                      ],
                      [
                        -122.406285,
                        37.760253
                      ],
                      [
                        -122.405882,
                        37.77482
                      ],
                      [
                        -122.354304,
                        37.817418
                      ],
                      [
                        -122.306246,
                        37.824581
                      ],
                      [
                        -122.296727,
                        37.819827
                      ],
                      [
                        -122.304539,
                        37.810668
                      ],
                      [
                        -122.302664,
                        37.804026
                      ],
                      [
                        -122.296864,
                        37.801782
                      ],
                      [
                        -122.290882,
                        37.803417
                      ],
                      [
                        -122.273042,
                        37.797618
                      ],
                      [
                        -122.278454,
                        37.787141
                      ],
                      [
                        -122.272743,
                        37.773236
                      ],
                      [
                        -122.276773,
                        37.773758
                      ]
                    ]
                  }
                },
                {
                  "type": "Feature",
                  "id": "e9716836-709c-45a9-abe1-df4c46e02117",
                  "properties": {
                    "Drive Time": "15 minutes",
                    "Mileage": "7.36 miles"
                  },
                  "geometry": {
                    "type": "LineString",
                    "coordinates": [
                      [
                        -122.276773,
                        37.773758
                      ],
                      [
                        -122.276773,
                        37.773758
                      ],
                      [
                        -122.27654,
                        37.788259
                      ],
                      [
                        -122.270869,
                        37.797692
                      ],
                      [
                        -122.268474,
                        37.79706
                      ],
                      [
                        -122.27866,
                        37.800254
                      ],
                      [
                        -122.279973,
                        37.802579
                      ],
                      [
                        -122.267345,
                        37.8233
                      ],
                      [
                        -122.254365,
                        37.819249
                      ],
                      [
                        -122.249497,
                        37.810831
                      ],
                      [
                        -122.229127,
                        37.800471
                      ],
                      [
                        -122.230953,
                        37.797473
                      ]
                    ]
                  }
                },
                {
                  "type": "Feature",
                  "id": "63faade9-0c2d-4a08-8775-618e4dfb44ea",
                  "properties": {
                    "Drive Time": "40 minutes",
                    "Mileage": "25.94 miles"
                  },
                  "geometry": {
                    "type": "LineString",
                    "coordinates": [
                      [
                        -122.230953,
                        37.797473
                      ],
                      [
                        -122.230953,
                        37.797473
                      ],
                      [
                        -122.236633,
                        37.797619
                      ],
                      [
                        -122.230769,
                        37.80289
                      ],
                      [
                        -122.249143,
                        37.810838
                      ],
                      [
                        -122.255539,
                        37.820273
                      ],
                      [
                        -122.281622,
                        37.827512
                      ],
                      [
                        -122.294256,
                        37.828043
                      ],
                      [
                        -122.35047,
                        37.819121
                      ],
                      [
                        -122.360562,
                        37.814332
                      ],
                      [
                        -122.390964,
                        37.786036
                      ],
                      [
                        -122.40638,
                        37.774918
                      ],
                      [
                        -122.406449,
                        37.76007
                      ],
                      [
                        -122.403014,
                        37.752311
                      ],
                      [
                        -122.409293,
                        37.735242
                      ],
                      [
                        -122.415275,
                        37.732211
                      ],
                      [
                        -122.431823,
                        37.732295
                      ],
                      [
                        -122.442722,
                        37.728794
                      ],
                      [
                        -122.453836,
                        37.712089
                      ],
                      [
                        -122.466012,
                        37.710166
                      ],
                      [
                        -122.471288,
                        37.705885
                      ],
                      [
                        -122.472573,
                        37.676403
                      ],
                      [
                        -122.476355,
                        37.671451
                      ],
                      [
                        -122.484676,
                        37.669156
                      ],
                      [
                        -122.484209,
                        37.659172
                      ],
                      [
                        -122.491338,
                        37.656381
                      ],
                      [
                        -122.490247,
                        37.636511
                      ],
                      [
                        -122.489765,
                        37.640354
                      ],
                      [
                        -122.487522,
                        37.639765
                      ]
                    ]
                  }
                }
              ]
            }
             ' show-feature-properties>
            </px-map-layer-geojson>

            <px-map-marker-group name="Bus stop data" data='{
              "type": "FeatureCollection",
              "features": [{
                "dataType": "route",
                "geometry": {
                  "coordinates": ["-122.276773", " 37.773758"],
                  "type": "Point"
                },
                "id": "home_8af66dad-fac7-442b-b97d-af19cfe1622a",
                "properties": {
                  "marker-icon": {
                    "icon-base": "custom-icon",
                    "icon-content": "px-nav:home",
                    "icon-fillColor": "white",
                    "icon-options": {
                      "fillColor": "white",
                      "strokeColor": "blue"
                    },
                    "icon-strokeColor": "#007acc",
                    "icon-type": "px-nav:unconfirmed"
                  },
                  "marker-popup": {
                    "popup-base": "info-popup",
                    "popup-description": "<span style=\"display: block;text-align: center; font-size: 13px; min-width: 150px; max-width:300px;\"><span>Starting Location</span></span>"
                  },
                  "markerType": "home",
                  "uuid": "home_8af66dad-fac7-442b-b97d-af19cfe1622a"
                },
                "type": "Feature"
              }, {
                "dataType": "route",
                "geometry": {
                  "coordinates": ["-122.385787", "37.617906"],
                  "type": "Point"
                },
                "id": "def39345-37c8-4c96-b552-4ee6cb898304",
                "properties": {
                  "marker-icon": {
                    "icon-base": "custom-icon",
                    "icon-content": "1",
                    "icon-fillColor": "white",
                    "icon-options": {
                      "fillColor": "white",
                      "strokeColor": "blue"
                    },
                    "icon-strokeColor": "#748b99",
                    "icon-type": "px-nav:unconfirmed"
                  },
                  "marker-popup": {
                    "popup-base": "info-popup",
                    "popup-description": "<span style=\"display: block;text-align: center; font-size: 13px; min-width: 150px; max-width:300px;\"><span>[WO-00000137] Ultrasound Equipment Inc</span><br/><span>08:00 ~ 10:00</span></span>"
                  },
                  "markerType": "appointment",
                  "uuid": "def39345-37c8-4c96-b552-4ee6cb898304"
                },
                "type": "Feature"
              }]
            }'>

            </px-map-marker-group>

            <!-- <px-map-marker-custom lat="37.773758" lng="-122.276773" icon="px-nav:unconfirmed" stroke-color="blue" fill-color="white"
              icon-content="px-nav:home" icon-fill-color="red" icon-stroke-color="white">
            </px-map-marker-custom>

            <px-map-marker-custom lat="37.617906" lng="-122.385787" icon="px-nav:unconfirmed" stroke-color="blue" fill-color="white"
              icon-content="px-nav:home" icon-fill-color="purple" icon-stroke-color="black">
            </px-map-marker-custom> -->

          </px-map>
        </div>
      </px-demo-component>
      <!-- END Component ------------------------------------------------------>

      <px-demo-component-snippet slot="px-demo-component-snippet" element-properties="{{props}}" element-name="px-map-tile-layer"
        links-includes='["px-map/px-map.html","px-map/px-map-tile-layer.html"]'>
      </px-demo-component-snippet>
    </px-demo-interactive>

    <!-- API Viewer -->
    <px-demo-api-viewer source="px-map-tile-layer" api-source-file-path="px-map/px-map-api.json" mark-private="[[apiMarkPrivate]]">
    </px-demo-api-viewer>

    <!-- Footer -->
    <px-demo-footer></px-demo-footer>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'px-map-marker-custom-demo',

    properties: {

      /**
       * Note: The actual data/values for `props` are placed in `this.demoProps`
       * to create a static reference that Polymer shouldn't overwrite.
       *
       * @property props
       * @type {Object}
       */
      props: {
        type: Object,
        value: function () { return this.demoProps; }
      },

      /**
       * An array of pre-configured `props` that can be used to provide the user
       * with a set of common examples. These configs will be made available
       * as a set of tabs the user can click that will automatically change
       * the `props` to specific values.
       *
       * @property configs
       * @type {Array}
       */
      configs: {
        type: Array,
        value: function () {
          return [
            {
              configName: "Basic",
              configReset: true
            }
          ]
        }
      },

      apiMarkPrivate: {
        type: Array,
        value: function () {
          return [
            "notifyInstReady",
            "notifyInstReady",
            "canAddInst",
            "shouldAddInst",
            "addInst",
            "shouldRemoveInst",
            "removeInst",
            "shouldUpdateInst",
            "updateInst",
            "createInst",
            "getInstOptions",
            "bindEvents",
            "unbindAllEvents",
            "addProperties",
            "extendObj",
            "getShadyScope",
            "isShadyScoped"
          ]
        }
      }
    },

    /**
     * A reference for `this.props`. Read the documentation there.
     *
     * @property demoProps
     * @type {Object}
     */
    demoProps: {
      url: {
        type: String,
        defaultValue: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        inputType: 'text'
      },

      parentComponent: {
        value: ['<div style="height:400px; width:600px; display:flex"><px-map flex-to-size disable-scroll-zoom disable-touch-zoom>', '</px-map></div>']
      }
    }
  });
</script>
